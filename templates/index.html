<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HATPI</title>
    <link rel="stylesheet" href="/hatpi/static/styles.css">
    <link rel="icon" type="image/png" href="/hatpi/images/favicon.png">
</head>
<body>
    <!-- Background animation elements -->
    <div class="background-container">
        <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/1231630/moon2.png" alt="">
        <div class="stars"></div>
        <div class="twinkling"></div>
    </div>

    <div class="content-wrapper">
        <!-- Replace the "Dates" title with pill buttons -->
        <div class="pills-container">
            <div class="pill-container-unique">
                <button class="pill-button-unique active" onclick="showTab('dates')">Dates</button>
                <button class="pill-button-unique" onclick="showTab('ihu')">IHU</button>
            </div>
        </div>

        <div class="container">
            <!-- Dates content -->
            <div id="dates" class="tab-content active">
                <div class="file-list">
                    <div class="file-items-container">
                        {% for folder, creation_date in folders %}
                            <div class="file-item">
                                <div class="file-name">
                                    <a href="{{ folder }}/">{{ folder | format_folder }}</a>
                                </div>
                                <div class="file-date">{{ creation_date }}</div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- IHU content -->
            <div id="ihu" class="tab-content">
                <div id="grid-container-ihu" class="grid-container-ihu"></div>
            </div>
        </div>

        <!-- Comments title -->
        <h2 class="comments-title">Comments</h2>
        <div class="comments-container">
            {% for unique_key, comment in comments.items() %}
                <div class="comment-item">
                    <div class="comment-header">
                        <span class="comment-filename">
                            <a href="{{ comment.file_path }}" target="_blank">
                                {{ comment.file_path.split('/')[-1] }}
                            </a>
                        </span>
                        <span class="comment-timestamp">{{ comment.timestamp }}</span>
                    </div>
                    <div class="comment-body">
                        <p>{{ comment.comment }}</p>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

    <script src="/hatpi/static/scripts.js"></script>
    <script>
        function showTab(tabId) {
            // Hide all tab contents
            var tabContents = document.getElementsByClassName('tab-content');
            for (var i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove('active');
            }

            // Deactivate all pill buttons
            var pillButtons = document.getElementsByClassName('pill-button-unique');
            for (var i = 0; i < pillButtons.length; i++) {
                pillButtons[i].classList.remove('active');
            }

            // Activate the selected tab and its corresponding button
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        // JavaScript to create the IHU grid
        document.addEventListener('DOMContentLoaded', function() {
            const rowColors = ["#D5A6BE", "#B4A7D6", "#CEE1F3", "#6FA7DC", "#77A5AF", "#93C47D", "#F9E499", "#F5B26B", "#E06566", "#CC4125"];
            const rowColumns = [3, 7, 8, 9, 9, 9, 8, 6, 4, 1];
            const gridContainer = document.getElementById('grid-container-ihu');

            let textIndex = 64;  // Starting text index
            for (let i = 0; i < rowColumns.length; i++) {
                const row = document.createElement('div');
                row.className = 'grid-row-ihu';
                row.style.display = 'grid';
                row.style.gridTemplateColumns = `repeat(${rowColumns[i]}, 45px)`;
                row.style.justifyContent = 'center';

                const cells = [];
                for (let j = 0; j < rowColumns[i]; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'grid-item-ihu';
                    cell.style.backgroundColor = rowColors[i];
                    cell.textContent = textIndex;
                    textIndex--;
                    cells.unshift(cell); // Add cell to the beginning of the array
                }
                cells.forEach(cell => row.appendChild(cell)); // Append cells to the row
                gridContainer.appendChild(row); // Append row to the grid container
            }
        });
    </script>
</body>
</html>
